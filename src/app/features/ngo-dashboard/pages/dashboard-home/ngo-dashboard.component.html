<div class="dashboard-container">
  <!-- Mobile Nav Overlay -->
  <div class="mobile-nav-overlay" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()"></div>
  
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed" [class.mobile-active]="isMobileMenuOpen">
    <div class="sidebar-header">
      <div class="logo-container">
        <img src="assets/images/volunera-text-logo-white.svg" alt="VolunEra" class="logo-image">
      </div>
      <!-- No collapse button here -->
    </div>

    <nav class="sidebar-nav">
      <a [routerLink]="['/ngo/dashboard']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-th-large"></i>
        <span>Dashboard</span>
      </a>
      <a [routerLink]="['/ngo/profile']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-building"></i>
        <span>Organization</span>
      </a>
      <a [routerLink]="['/ngo/events']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-calendar"></i>
        <span>Events</span>
      </a>
      <a [routerLink]="['/ngo/volunteers']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-users"></i>
        <span>Volunteers</span>
      </a>
      <a [routerLink]="['/ngo/donations']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-gift"></i>
        <span>Donations</span>
      </a>
      <a [routerLink]="['/ngo/content']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-bullhorn"></i>
        <span>Content</span>
      </a>
      <a [routerLink]="['/ngo/insights']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-chart-line"></i>
        <span>Insights</span>
      </a>
      <a [routerLink]="['/ngo/settings']" routerLinkActive="active" class="nav-item">
        <i class="fas fa-cog"></i>
        <span>Settings</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="profile-completion">
        <div class="completion-circle">
          <div class="progress-indicator" [style.width.%]="organization.profileCompletion"></div>
          <span>{{organization.profileCompletion}}%</span>
        </div>
        <div class="completion-text">
          <p>Complete profile</p>
          <p class="subtext">Complete your organization profile</p>
        </div>
      </div>

      <div class="user-profile">
        <img [src]="organization.avatar" alt="Organization Logo" class="avatar">
        <div class="user-info">
          <p class="user-name">{{organization.name}}</p>
          <p class="user-email">{{organization.email}}</p>
        </div>
      </div>
    </div>
    
    <!-- Mobile close button -->
    <button class="mobile-nav-close" (click)="toggleMobileMenu()">
      <i class="fas fa-times"></i>
    </button>
  </aside>

  <!-- Main Content Wrapper -->
  <div class="content-wrapper">
    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Bar (now part of main content) -->
      <header class="top-bar">
        <!-- Burger menu toggle button - visible on both desktop and mobile -->
        <button class="mobile-nav-toggle" (click)="toggleSidebarOrMenu()">
          <i class="fas fa-bars"></i>
        </button>
        
        <!-- Search container positioned to the left -->
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" placeholder="Search volunteers, events, donations..." class="search-input">
        </div>
        
        <div class="top-bar-actions">
          <button class="action-button notification-btn">
            <i class="fas fa-bell"></i>
            <span class="notification-indicator"></span>
          </button>
          <button class="action-button message-btn">
            <i class="fas fa-envelope"></i>
          </button>
        </div>
      </header>
      
      <!-- Quick Actions Section -->
      <div class="quick-actions">
        <button class="quick-action-btn primary" (click)="createEvent()">
          <i class="fas fa-calendar-plus"></i>
          <span>Create Event</span>
        </button>
        <button class="quick-action-btn secondary" (click)="createPost()">
          <i class="fas fa-edit"></i>
          <span>Post Update</span>
        </button>
      </div>
      
      <!-- Dashboard Content -->
      <div class="dashboard-content">
        <!-- Two Column Layout with stacked right side -->
        <div class="three-column-layout">
          <!-- Left Column - Organization Stats and Events -->
          <div class="column left-column">
            <!-- Organization Stats Card -->
            <section class="card organization-stats-card">
              <div class="card-header">
                <h2 class="card-title">Organization Stats</h2>
                <a href="javascript:void(0)" class="card-link">View Insights</a>
              </div>
              <div class="card-content">
                <div class="stats-overview">
                  <div class="stat-item">
                    <span class="stat-value">{{organizationStats.totalVolunteers}}</span>
                    <span class="stat-label">Total Volunteers</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value">{{organizationStats.activeVolunteers}}</span>
                    <span class="stat-label">Active Volunteers</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value">{{organizationStats.totalHours | number}}</span>
                    <span class="stat-label">Volunteer Hours</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value">{{organizationStats.totalEvents}}</span>
                    <span class="stat-label">Total Events</span>
                  </div>
                </div>
                
                <div class="engagement-chart">
                  <h3 class="chart-title">Volunteer Engagement (Last 7 days)</h3>
                  <div class="chart-bars">
                    <div class="chart-bar" *ngFor="let value of organizationStats.weeklyData; let i = index" [style.height.%]="value">
                      <span class="bar-label">{{['M', 'T', 'W', 'T', 'F', 'S', 'S'][i]}}</span>
                    </div>
                  </div>
                </div>
                
                <div class="stats-highlights">
                  <div class="highlight-card">
                    <i class="fas fa-donate highlight-icon"></i>
                    <div class="highlight-content">
                      <span class="highlight-value">${{organizationStats.totalDonations | number}}</span>
                      <span class="highlight-label">Total Donations</span>
                    </div>
                  </div>
                  <div class="highlight-card">
                    <i class="fas fa-star highlight-icon"></i>
                    <div class="highlight-content">
                      <span class="highlight-value">{{organizationStats.averageRating}}/5</span>
                      <span class="highlight-label">Average Rating</span>
                    </div>
                  </div>
                </div>
              </div>
            </section>
            
            <!-- Event Management Card -->
            <section class="card events-card">
              <div class="card-header">
                <h2 class="card-title">Upcoming Events</h2>
                <a href="javascript:void(0)" class="card-link" (click)="viewAllEvents()">View All</a>
              </div>
              <div class="card-content">
                <div class="events-list">
                  <div *ngFor="let event of upcomingEvents" class="event-item">
                    <div class="event-date">
                      <span class="date-day">{{event.date | date:'d'}}</span>
                      <span class="date-month">{{event.date | date:'MMM'}}</span>
                    </div>
                    <div class="event-details">
                      <h4 class="event-title">{{event.title}}</h4>
                      <p class="event-location">
                        <i class="fas fa-map-marker-alt"></i>
                        {{event.location}}
                      </p>
                      <div class="event-stats">
                        <div class="registration-progress">
                          <div class="progress-bar">
                            <div class="progress" [style.width.%]="(event.registeredVolunteers / event.capacity) * 100"></div>
                          </div>
                          <span class="progress-text">{{event.registeredVolunteers}}/{{event.capacity}} registered</span>
                        </div>
                      </div>
                    </div>
                    <div class="event-actions">
                      <button class="event-action-btn manage-btn">
                        <i class="fas fa-cog"></i>
                        <span>Manage</span>
                      </button>
                    </div>
                  </div>
                </div>
                
                <div class="create-event-btn-container">
                  <button class="create-event-btn" (click)="createEvent()">
                    <i class="fas fa-plus"></i>
                    <span>Create New Event</span>
                  </button>
                </div>
              </div>
            </section>
          </div>

          <!-- Right Column - Volunteers, Donations, and Posts -->
          <div class="column right-column">
            <!-- Volunteer Management Card -->
            <section class="card volunteers-card">
              <div class="card-header">
                <h2 class="card-title">Recent Volunteers</h2>
                <a href="javascript:void(0)" class="card-link" (click)="viewAllVolunteers()">View All</a>
              </div>
              <div class="card-content">
                <div class="volunteers-list">
                  <div *ngFor="let volunteer of recentVolunteers" class="volunteer-item">
                    <div class="volunteer-avatar">
                      <img [src]="volunteer.avatar || '/assets/images/placeholder-avatar.png'" [alt]="volunteer.name + ' avatar'">
                    </div>
                    <div class="volunteer-details">
                      <h4 class="volunteer-name">{{volunteer.name}}</h4>
                      <p class="volunteer-info">
                        <span class="volunteer-hours">{{volunteer.hoursContributed}} hrs</span> •
                        <span class="volunteer-points">{{volunteer.points}} pts</span>
                      </p>
                      <div class="volunteer-skills">
                        <span *ngFor="let skill of volunteer.skills" class="skill-badge">{{skill}}</span>
                      </div>
                    </div>
                    <div class="volunteer-actions">
                      <button class="action-btn contact-btn">
                        <i class="fas fa-envelope"></i>
                      </button>
                      <button class="action-btn manage-btn">
                        <i class="fas fa-ellipsis-v"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </section>
            
            <!-- Donations Card -->
            <section class="card donations-card">
              <div class="card-header">
                <h2 class="card-title">Recent Donations</h2>
                <a href="javascript:void(0)" class="card-link" (click)="viewAllDonations()">View All</a>
              </div>
              <div class="card-content">
                <div class="donations-list">
                  <div *ngFor="let donation of recentDonations" class="donation-item">
                    <div class="donation-icon" [ngClass]="donation.type">
                      <i class="fas" [ngClass]="donation.type === 'financial' ? 'fa-dollar-sign' : 'fa-box'"></i>
                    </div>
                    <div class="donation-details">
                      <h4 class="donation-title">
                        {{donation.type === 'financial' ? '$' + donation.amount : donation.items}}
                      </h4>
                      <p class="donation-info">
                        <span class="donor-name">{{donation.donor}}</span> •
                        <span class="donation-date">{{donation.date | date:'mediumDate'}}</span>
                      </p>
                    </div>
                    <div class="donation-status" [ngClass]="donation.status">
                      {{donation.status}}
                    </div>
                  </div>
                </div>
              </div>
            </section>
            
            <!-- Content Management / Posts Card -->
            <section class="card posts-card">
              <div class="card-header">
                <h2 class="card-title">Recent Posts</h2>
                <a href="javascript:void(0)" class="card-link">View All</a>
              </div>
              <div class="card-content">
                <div class="posts-list">
                  <div *ngFor="let post of recentPosts" class="post-item">
                    <div class="post-header">
                      <div class="post-date">
                        {{post.date | date:'MMM d, yyyy'}}
                      </div>
                      <div class="post-actions">
                        <button class="action-btn" (click)="viewPostInsights(post)">
                          <i class="fas fa-chart-bar"></i>
                        </button>
                      </div>
                    </div>
                    <div class="post-content">
                      <p class="post-text">{{post.content}}</p>
                      <div *ngIf="post.image" class="post-image">
                        <img [src]="post.image" alt="Post image">
                      </div>
                    </div>
                    <div class="post-stats">
                      <div class="stat-group">
                        <i class="fas fa-heart"></i>
                        <span>{{post.likes}}</span>
                      </div>
                      <div class="stat-group">
                        <i class="fas fa-comment"></i>
                        <span>{{post.comments}}</span>
                      </div>
                      <div class="stat-group">
                        <i class="fas fa-eye"></i>
                        <span>{{post.reach}}</span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="create-post-btn-container">
                  <button class="create-post-btn" (click)="createPost()">
                    <i class="fas fa-plus"></i>
                    <span>Create New Post</span>
                  </button>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>